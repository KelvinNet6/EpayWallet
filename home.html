<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PaySheet</title>
      <link rel="icon" href="screenshot_2025_02_06_14_53_13_QDM_icon.ico" type="image/png">
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.0"></script>
    <link rel="manifest" href="manifest.json">
</head>
<body>
    <button class="menu-btn" id="menu-btn">â˜°</button>

    <div class="sidebar" id="sidebar">
        <ul>
            <li><a href="home.html"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
            <li><a href="transferfunds.html"><i class="fas fa-exchange-alt"></i> TF</a></li>
            <li><a href="cashout.html"><i class="fas fa-money-check-alt"></i> Cash Out</a></li>
            <li><a href="profilesettings.html"><i class="fas fa-cogs"></i> Account Settings</a></li>
            <li><button id="logout-btn"><i class="fas fa-sign-out-alt"></i> Sign Out</button></li>

        </ul>
    </div>

    <div class="main-content" id="home">
        <header class="header">
            <h1>PaySheet</h1>
        </header>
        
        <section class="account-info">
            <div class="account-details">
                <h2>PaySheet Name: Kelvin Kadzenje</h2>
                <br>
                <p>PaySheet Number: 460006759</p>
                <br>
                <p>Available Wallet Balance: 5000000000000</p>
            </div>
        </section>
        
        <section class="transaction-history">
            <h3>Recent Transactions</h3>
            <div class="transactions">
                <div class="transaction-item">
                    <span class="type">PaySheet</span>
                    <span class="amount">k500000</span>
                    <span class="date">02/05/2025</span>
                </div>
                <div class="transaction-item">
                    <span class="type">PaySheetTransfer</span>
                    <span class="amount">K200000</span>
                    <span class="date">01/29/2025</span>
                </div>
                <div class="transaction-item">
                    <span class="type">PaySheetCashOut</span>
                    <span class="amount">K50000</span>
                    <span class="date">01/25/2025</span>
                </div>
            </div>
            <br>
            <!-- Button to open the popup -->
            <button id="view-all-transactions-btn">View All Transactions</button>
        </section>
        
        <br><br>
        <!-- New Section with Background Video -->
        <section class="video-container">
            <div class="video-overlay">
                <h2>PaySheet</h2>
                <p>Providing Easy Access to Personal Finances</p>
            </div>
            <video autoplay muted loop playsinline class="background-video">
                <source src="853984-hd_1920_1080_25fps.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </section>

        <!-- New Section for Transaction Graph -->
        <section class="transaction-graph">
            <h2>Transaction Trends</h2>
            <canvas id="transactionChart" width="400" height="200"></canvas>
        </section>
    </div>

    <!-- Modal Popup HTML -->
<div id="transactions-modal" class="modal">
    <div class="modal-content">
        <span id="close-modal" class="close-btn">&times;</span>
        <h2>All Transactions</h2>
        <div class="scroll-container">
            <!-- Example of past transactions to display -->
            <div class="transaction-item">
                <span class="type">PaySheet</span>
                <span class="amount">k100000</span>
                <span class="date">01/15/2025</span>
            </div>
            <div class="transaction-item">
                <span class="type">Transfer</span>
                <span class="amount">K150000</span>
                <span class="date">01/10/2025</span>
            </div>
            <div class="transaction-item">
                <span class="type">CashOut</span>
                <span class="amount">K30000</span>
                <span class="date">01/05/2025</span>
            </div>
             <!-- Example of past transactions to display -->
            <div class="transaction-item">
                <span class="type">PaySheet</span>
                <span class="amount">k100000</span>
                <span class="date">01/15/2025</span>
            </div>
            <div class="transaction-item">
                <span class="type">Transfer</span>
                <span class="amount">K150000</span>
                <span class="date">01/10/2025</span>
            </div>
            <div class="transaction-item">
                <span class="type">CashOut</span>
                <span class="amount">K30000</span>
                <span class="date">01/05/2025</span>
            </div>
             <!-- Example of past transactions to display -->
            <div class="transaction-item">
                <span class="type">PaySheet</span>
                <span class="amount">k100000</span>
                <span class="date">01/15/2025</span>
            </div>
            <div class="transaction-item">
                <span class="type">Transfer</span>
                <span class="amount">K150000</span>
                <span class="date">01/10/2025</span>
            </div>
            <div class="transaction-item">
                <span class="type">CashOut</span>
                <span class="amount">K30000</span>
                <span class="date">01/05/2025</span>
            </div>
        </div>
    </div>
</div>

    <script src="app.js"></script>
    <script>
        // Toggle Sidebar for Mobile
        document.getElementById("menu-btn").addEventListener("click", () => {
            const sidebar = document.getElementById("sidebar");
            sidebar.classList.toggle("active");
        });

        // Logout functionality
        document.getElementById("logout-btn").addEventListener("click", () => {
            localStorage.removeItem('authToken');
            window.location.href = "index.html";
        });

   // Open and close modal for viewing all transactions
    const viewAllTransactionsBtn = document.getElementById("view-all-transactions-btn");
    const modal = document.getElementById("transactions-modal");
    const closeModal = document.getElementById("close-modal");
    const body = document.body;

    // Open the modal when "View All Transactions" button is clicked
    viewAllTransactionsBtn.addEventListener("click", () => {
        modal.style.display = "block"; // Show the modal
        body.style.overflow = "hidden"; // Prevent the body from scrolling when the modal is open
    });

    // Close the modal when the close button (X) is clicked
    closeModal.addEventListener("click", () => {
        modal.style.display = "none"; // Hide the modal
        body.style.overflow = "auto"; // Re-enable body scrolling
    });

    // Close the modal if the user clicks outside the modal content
    window.addEventListener("click", (event) => {
        if (event.target === modal) {
            modal.style.display = "none"; // Hide the modal
            body.style.overflow = "auto"; // Re-enable body scrolling
        }
    });
        //-----------------------load graph-------------------------//
        window.addEventListener('load', function() {
            // Log to check that the script is working
            console.log("Page loaded, creating chart...");

            // Get the canvas element
            const canvas = document.getElementById('transactionChart');
            
            // Force width and height of the canvas
            canvas.width = 400; // Set width of the canvas
            canvas.height = 200; // Set height of the canvas

            // Get the context to draw on the canvas
            const ctx = canvas.getContext('2d');

            // Initialize Chart.js
            const transactionChart = new Chart(ctx, {
                type: 'line', // Type of chart (line chart in this case)
                data: {
                    labels: ['01/25/2025', '01/29/2025', '02/05/2025'], // Transaction dates
                    datasets: [{
                        label: 'Transaction Amount (K)',
                        data: [50000, 200000, 500000], // Transaction amounts
                        borderColor: 'rgba(75, 192, 192, 1)', // Color of the line
                        backgroundColor: 'rgba(75, 192, 192, 0.2)', // Background color under the line
                        fill: true, // Fill the area under the line
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        });
    </script>

    <!-- Bottom Navigation for Mobile View -->
<div class="bottom-nav">
    <a href="home.html" class="nav-item">
        <i class="fas fa-home"></i>
    </a>
    <a href="FAQs.html" class="nav-item">
        <i class="fas fa-question-circle"></i>
    </a>
    <a href="chat.html" class="nav-item ai-chat-logo">
        <img src="Capture.PNG" alt="AI Chat Logo" class="ai-chat-img">
    </a>
</div>
</body>
</html>
